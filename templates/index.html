<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Market Watch</title>
    <link href="../static/imgs/b83fd4bfe1b2cd2c13381166ddc2e895.png" rel="icon" sizes="16x16" type="image/png">
    <link href="../static/imgs/a4a66165d95cff5b2b95d1fe85847b62.png" rel="icon" sizes="32x32" type="image/png">
    <link href="../static/imgs/9f4d793ab5960f8a37a10fa1d286ef34.png" rel="apple-touch-icon" sizes="180x180">
    <link href="../static/styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100&amp;family=Ubuntu:wght@300&amp;display=swap"
          rel="stylesheet">
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
          integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" rel="stylesheet">
    <script crossorigin="anonymous"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script crossorigin="anonymous"
            integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    <script crossorigin="anonymous" src="https://kit.fontawesome.com/ea4badf3aa.js"></script>
</head>
<body>
<div class="nv">
    <nav class="navbar navbar-expand-md navbar-light">
        <a class="navbar-brand" href="{{ url_for('home') }}" style="color:green; font-family:'Montserrat-Light';"><img
                alt="image" id="icn" src="../static/imgs/9f4d793ab5960f8a37a10fa1d286ef34.png" style="width:40%;">Farmerce</a>
        <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                class="navbar-toggler"
                data-bs-target="#navbarSupportedContent" data-bs-toggle="collapse" type="button">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class=" collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto ">
                <li class="nav-item">
                    <a class="nav-link" href="{{url_for('data')}}">Data</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('nairobi_graph') }}">Market</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('weather_data') }}">Weather</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('geo_data') }}">Satellite</a>
                </li>
            </ul>
        </div>
    </nav>
    <h1 style="margin-top: 15px; font-family:'Ubuntu';">Welcome To Farmerce Market Watch</h1>
</div>
<br>
<div class="marquee">
    <div class="trend">
        <span>Kisumu: Dry onions {{change[0]}} %
        {% if change[0] > 0 %}
            <i class="fa-solid fa-sort-up" style="color:blue; font-size:20px;"></i>
        {% elif change[0] == 0.0 %}
            <i class="fa-solid fa-sort" style="color:black; font-size:13px;"></i>
        {% else %}
            <i class="fa-solid fa-sort-down" style="color:red; font-size:20px;"></i>
        {% endif %}
        </span>
        <span>Hass Avocado {{change[1]}} %
        {% if change[1] > 0 %}
            <i class="fa-solid fa-sort-up" style="color:blue; font-size:20px;"></i>
        {% elif change[1] == 0.0 %}
            <i class="fa-solid fa-sort" style="color:black; font-size:13px;"></i>
        {% else %}
            <i class="fa-solid fa-sort-down" style="color:red; font-size:20px;"></i>
        {% endif %}
        </span>
        <span>Irish Potatoes {{change[2]}} %
        {% if change[2] > 0 %}
            <i class="fa-solid fa-sort-up" style="color:blue; font-size:20px;"></i>
        {% elif change[2] == 0.0 %}
            <i class="fa-solid fa-sort" style="color:black; font-size:13px;"></i>
        {% else %}
            <i class="fa-solid fa-sort-down" style="color:red; font-size:20px;"></i>
        {% endif %}
        </span>
        <span>Nairobi: Dry onions {{change[3]}} %
        {% if change[3] > 0 %}
            <i class="fa-solid fa-sort-up" style="color:blue; font-size:20px;"></i>
        {% elif change[3] == 0.0 %}
            <i class="fa-solid fa-sort" style="color:black; font-size:13px;"></i>
        {% else %}
            <i class="fa-solid fa-sort-down" style="color:red; font-size:20px;"></i>
        {% endif %}
        </span>
        <span>Local Avocado {{change[4]}} %
        {% if change[4] > 0 %}
            <i class="fa-solid fa-sort-up" style="color:blue; font-size:20px;"></i>
        {% elif change[4] == 0.0 %}
            <i class="fa-solid fa-sort" style="color:black; font-size:13px;"></i>
        {% else %}
            <i class="fa-solid fa-sort-down" style="color:red; font-size:20px;"></i>
        {% endif %}
        </span>
        <span>Pishori Rice {{change[5]}} %
        {% if change[5] > 0 %}
            <i class="fa-solid fa-sort-up" style="color:blue; font-size:20px;"></i>
        {% elif change[5] == 0.0 %}
            <i class="fa-solid fa-sort" style="color:black; font-size:13px;"></i>
        {% else %}
            <i class="fa-solid fa-sort-down" style="color:red; font-size:20px;"></i>
        {% endif %}
        </span>
        <span>Nakuru: Dry onions {{change[6]}} %
        {% if change[6] > 0 %}
            <i class="fa-solid fa-sort-up" style="color:blue; font-size:20px;"></i>
        {% elif change[6] == 0.0 %}
            <i class="fa-solid fa-sort" style="color:black; font-size:13px;"></i>
        {% else %}
            <i class="fa-solid fa-sort-down" style="color:red; font-size:20px;"></i>
        {% endif %}
        </span>
        <span style="position: relative;">White Maize {{change[7]}} %
        {% if change[7] > 0 %}
            <i class="fa-solid fa-sort-up" style="color:blue; font-size:20px;"></i>
        {% elif change[7] == 0.0 %}
            <i class="fa-solid fa-sort" style="color:black; font-size:13px;"></i>
        {% else %}
            <i class="fa-solid fa-sort-down" style="color:red; font-size:20px;"></i>
        {% endif %}
        </span>
    </div>
</div>
<br>
<br>
<div style="font-family:'Ubuntu';">
    <h3>Market Insights</h3>
</div>
<br>
<br>
<br>
<div>
    <div class="col-sm-4 p-2 mb-1" style="margin: 0 auto;">
        <select class="form-control" id="commodity" onchange="functionSearch()">
            <option selected>Select A County</option>
            <option value="Nairobi">Nairobi</option>
            <option value="Nakuru">Nakuru</option>
            <option value="Kisumu">Kisumu</option>
        </select>
    </div>
</div>

<div id="frame-container">
    <p class='chart' id='chart'></p>
</div>
<h3 class="headertekst" style="font-family:'Montserrat-Light';">Crop Market Analysis</h3>
<br>
<h3 class="headertekst" style="font-family:'Montserrat-Light';">Dry Onions</h3>

<di class="buttons">
    <button class="bt" onclick="window.location.href='{{url_for('data')}}'">Click to view datasets</button>
</di>
<div class="page_1">
    <iframe title="Price Trends for Dry onions" style="width:605px; height:375px;" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSyTcqgW-TT9_qV9dwXrnU-NSsa5ZJiOXFKHNHtIoxclJYh2xyaPgD3XhMEgf_u_NAlda08VuHKx7ic/pubchart?oid=378535597&amp;format=interactive"></iframe>
</div>
<div class="navigation">
    <a href="{{ url_for('nairobi_graph') }}">Click to view more</a>
</div>
<h3 class="headertekst" style="font-family:'Montserrat-Light';">Rice</h3>

<div class="buttons">
    <button class="bt" onclick="window.location.href='{{url_for('nakuru_data')}}'">Click to view datasets</button>
</div>
<div class="page_1">
            <iframe title="Supply and Price Trends for Rice" style="width:605px; height:375px;" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSyTcqgW-TT9_qV9dwXrnU-NSsa5ZJiOXFKHNHtIoxclJYh2xyaPgD3XhMEgf_u_NAlda08VuHKx7ic/pubchart?oid=237852810&amp;format=interactive"></iframe>
</div>


<div class="navigation">
    <a href="{{ url_for('nakuru_graph') }}">Click to view more</a>
</div>
<h3 class="headertekst" style="font-family:'Montserrat-Light';">Maize</h3>
<div class="buttons">
    <button class="bt" onclick="window.location.href='{{url_for('kisumu_data')}}'">Click to view datasets</button>
</div>
<div class="page_1">
            <iframe title="Supply and Price Trends for Dry Maize" style="width:605px; height:375px;" src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSyTcqgW-TT9_qV9dwXrnU-NSsa5ZJiOXFKHNHtIoxclJYh2xyaPgD3XhMEgf_u_NAlda08VuHKx7ic/pubchart?oid=595287578&amp;format=interactive"></iframe>
</div>


<div class="navigation">
    <a href="{{ url_for('kisumu_graph') }}">Click to view more</a>
</div>
<footer class="footer">Copyright {{date}} <span
        onclick="window.open('https://farmerce.io');">Farmerce</span></footer>

<script async src="../static/js/script.js"></script>
<script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
<script type='text/javascript'>
  var graph_1 = {{graphJSON_y | safe}};
  var graph_2 = {{graphJSON_z | safe}};
  var graph_3 = {{graphJSON_x | safe}};

  function functionSearch(){
    const com = document.getElementById('commodity');

    if(com.value == "Nairobi"){
        Plotly.react('chart',graph_2,{});
    }
    else if(com.value == "Nakuru"){
        Plotly.react('chart',graph_3,{});
    }
    else if(com.value == "Kisumu"){
        Plotly.react('chart',graph_1,{});
    }
    else {
        document.getElementById('frame-container').innerHTML = ''
    }
  }

</script>
</body>
</html>
